<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>es6 setup</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
        }
        #log-container {
            width: 80%;
            height: 80%;
            background: #333;
            color: #ccc;
            padding: 20px;
        }
    </style>

</head>
<body>

<h2>es6 setup</h2>
<pre id="log-container"><code id="logs">## Hello...</code></pre>

<script src="node_modules/systemjs/dist/system.js"></script>
<script>
    // set our baseURL reference path
    System.config({
        baseURL: '/dist'
    });

    // loads /app/main.js
    System.import('app.js');
</script>
<script>
    (function () {
        'use strict';

        var pageLogger = {
            elementSelector: function (selector) {
                this.selector = selector;
            },
            appendLog: function (message) {
                this.logsElement.innerHTML = this.logsElement.innerHTML + '\n\n' + message;
            },
            appendArguments: function (args) {
                this.appendLog(args.map(function (argument) {
                    if (typeof argument === 'object') {
                        return JSON.stringify(argument);
                    }

                    return argument;
                }).join('\n'));
            }
        };

        var logFn = console.log;

        console.log = function () {
            pageLogger.appendArguments(Array.prototype.slice.apply(arguments));
            logFn.apply(console, arguments);
        };

        var _logsElement;
        Object.defineProperty(pageLogger, 'logsElement', {
            get: function () {
                if (_logsElement === undefined || _logsElement.selector !== this.selector) {
                    _logsElement = {
                        element: document.querySelector('#logs'),
                        selector: this.selector
                    };
                }
                return _logsElement.element;
            }
        })
    })();
</script>
<script src="//localhost:35729/livereload.js"></script>
</body>
</html>